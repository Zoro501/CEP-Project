<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Doctor Discovery & Search - CurASync</title>
    <link rel="stylesheet" href="../css/main.css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
    <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places" defer></script>
<script type="module" src="https://static.rocket.new/rocket-web.js?_cfg=https%3A%2F%2Fcurasync9054back.builtwithrocket.new&_be=https%3A%2F%2Fapplication.rocket.new&_v=0.1.6"></script>
</head>
<body class="bg-background min-h-screen">
    <!-- Header -->
    <header class="bg-white shadow-medical-sm border-b border-secondary-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <div class="flex items-center">
                    <a href="patient_dashboard.html" class="flex items-center space-x-2">
                        <div class="w-8 h-8 bg-primary rounded-lg flex items-center justify-center">
                            <i class="fas fa-heartbeat text-white text-lg"></i>
                        </div>
                        <span class="text-xl font-semibold text-text-primary">CurASync</span>
                    </a>
                </div>
                
                <!-- Search Bar -->
                <div class="flex-1 max-w-2xl mx-4 relative">
                    <div class="relative">
                        <input type="text" id="globalSearch" placeholder="Search doctors, hospitals, or specialties..." class="form-input w-full pl-10 pr-12 focus-medical" />
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fas fa-search text-secondary-400"></i>
                        </div>
                        <button class="absolute inset-y-0 right-0 pr-3 flex items-center lg:hidden" onclick="toggleMobileFilters()">
                            <i class="fas fa-filter text-secondary-400 hover:text-primary transition-medical"></i>
                        </button>
                    </div>
                    <!-- Search Suggestions -->
                    <div id="searchSuggestions" class="absolute top-full left-0 right-0 bg-white border border-secondary-200 rounded-medical-sm shadow-medical-lg mt-1 hidden z-50">
                        <div class="p-2 space-y-1">
                            <div class="px-3 py-2 hover:bg-secondary-50 rounded cursor-pointer transition-medical">
                                <i class="fas fa-user-md text-primary mr-2"></i>
                                Dr. Sarah Johnson - Cardiologist
                            </div>
                            <div class="px-3 py-2 hover:bg-secondary-50 rounded cursor-pointer transition-medical">
                                <i class="fas fa-hospital text-primary mr-2"></i>
                                City General Hospital
                            </div>
                            <div class="px-3 py-2 hover:bg-secondary-50 rounded cursor-pointer transition-medical">
                                <i class="fas fa-stethoscope text-primary mr-2"></i>
                                Dermatology
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Navigation -->
                <nav class="hidden md:flex items-center space-x-6">
                    <a href="patient_dashboard.html" class="text-text-secondary hover:text-primary transition-medical">Dashboard</a>
                    <a href="ai_symptom_analysis.html" class="text-text-secondary hover:text-primary transition-medical">Symptoms</a>
                    <a href="doctor_discovery_search.html" class="text-primary font-medium">Find Doctors</a>
                    <a href="appointment_management.html" class="text-text-secondary hover:text-primary transition-medical">Appointments</a>
                </nav>

                <!-- User Menu -->
                <div class="flex items-center space-x-4">
                    <button class="p-2 text-secondary-400 hover:text-primary transition-medical relative">
                        <i class="fas fa-bell text-lg"></i>
                        <span class="absolute -top-1 -right-1 w-3 h-3 bg-error rounded-full"></span>
                    </button>
                    <div class="w-8 h-8 bg-primary rounded-full flex items-center justify-center">
                        <span class="text-white text-sm font-medium">JD</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="flex min-h-screen">
        <!-- Desktop Sidebar Filters -->
        <aside class="hidden lg:block w-80 bg-white border-r border-secondary-200 p-6 overflow-y-auto">
            <div class="space-y-6">
                <!-- Filter Header -->
                <div class="flex items-center justify-between">
                    <h2 class="text-lg font-semibold text-text-primary">Filters</h2>
                    <button onclick="clearAllFilters()" class="text-sm text-primary hover:text-primary-700 transition-medical">Clear All</button>
                </div>

                <!-- Specialty Filter -->
                <div>
                    <label class="block text-sm font-medium text-text-primary mb-3">Specialty</label>
                    <select id="specialtyFilter" class="form-input w-full focus-medical">
                        <option value>All Specialties</option>
                        <option value="cardiology">Cardiology</option>
                        <option value="dermatology">Dermatology</option>
                        <option value="neurology">Neurology</option>
                        <option value="orthopedics">Orthopedics</option>
                        <option value="pediatrics">Pediatrics</option>
                        <option value="psychiatry">Psychiatry</option>
                        <option value="radiology">Radiology</option>
                        <option value="surgery">Surgery</option>
                    </select>
                </div>

                <!-- Location & Distance -->
                <div>
                    <label class="block text-sm font-medium text-text-primary mb-3">Location</label>
                    <input type="text" id="locationInput" placeholder="Enter city or zip code" class="form-input w-full mb-3 focus-medical" />
                    <div>
                        <label class="block text-sm font-medium text-text-secondary mb-2">Distance: <span id="distanceValue">10</span> miles</label>
                        <input type="range" id="distanceSlider" min="1" max="50" value="10" class="w-full h-2 bg-secondary-200 rounded-lg appearance-none cursor-pointer" />
                    </div>
                </div>

                <!-- Availability -->
                <div>
                    <label class="block text-sm font-medium text-text-primary mb-3">Availability</label>
                    <input type="date" id="availabilityDate" class="form-input w-full focus-medical" min="2025-01-18" />
                </div>

                <!-- Insurance -->
                <div>
                    <label class="block text-sm font-medium text-text-primary mb-3">Insurance Accepted</label>
                    <div class="space-y-2">
                        <label class="flex items-center">
                            <input type="checkbox" class="h-4 w-4 text-primary focus:ring-primary border-secondary-300 rounded" />
                            <span class="ml-2 text-sm text-text-secondary">Blue Cross Blue Shield</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" class="h-4 w-4 text-primary focus:ring-primary border-secondary-300 rounded" />
                            <span class="ml-2 text-sm text-text-secondary">Aetna</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" class="h-4 w-4 text-primary focus:ring-primary border-secondary-300 rounded" />
                            <span class="ml-2 text-sm text-text-secondary">Cigna</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" class="h-4 w-4 text-primary focus:ring-primary border-secondary-300 rounded" />
                            <span class="ml-2 text-sm text-text-secondary">UnitedHealth</span>
                        </label>
                    </div>
                </div>

                <!-- Languages -->
                <div>
                    <label class="block text-sm font-medium text-text-primary mb-3">Languages Spoken</label>
                    <div class="space-y-2">
                        <label class="flex items-center">
                            <input type="checkbox" class="h-4 w-4 text-primary focus:ring-primary border-secondary-300 rounded" />
                            <span class="ml-2 text-sm text-text-secondary">English</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" class="h-4 w-4 text-primary focus:ring-primary border-secondary-300 rounded" />
                            <span class="ml-2 text-sm text-text-secondary">Spanish</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" class="h-4 w-4 text-primary focus:ring-primary border-secondary-300 rounded" />
                            <span class="ml-2 text-sm text-text-secondary">French</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" class="h-4 w-4 text-primary focus:ring-primary border-secondary-300 rounded" />
                            <span class="ml-2 text-sm text-text-secondary">Mandarin</span>
                        </label>
                    </div>
                </div>

                <!-- Rating -->
                <div>
                    <label class="block text-sm font-medium text-text-primary mb-3">Minimum Rating</label>
                    <div class="flex items-center space-x-2">
                        <div class="flex space-x-1">
                            <button class="rating-star text-2xl text-secondary-300 hover:text-warning transition-medical" data-rating="1">★</button>
                            <button class="rating-star text-2xl text-secondary-300 hover:text-warning transition-medical" data-rating="2">★</button>
                            <button class="rating-star text-2xl text-secondary-300 hover:text-warning transition-medical" data-rating="3">★</button>
                            <button class="rating-star text-2xl text-secondary-300 hover:text-warning transition-medical" data-rating="4">★</button>
                            <button class="rating-star text-2xl text-secondary-300 hover:text-warning transition-medical" data-rating="5">★</button>
                        </div>
                        <span id="ratingText" class="text-sm text-text-secondary">& up</span>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="flex-1 p-4 lg:p-6">
            <!-- Results Header -->
            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6">
                <div>
                    <h1 class="text-2xl font-semibold text-text-primary mb-2">Find Healthcare Providers</h1>
                    <p class="text-text-secondary">
                        <span id="resultsCount">247</span> doctors found near you
                        <button onclick="getCurrentLocation()" class="ml-2 text-primary hover:text-primary-700 transition-medical">
                            <i class="fas fa-location-arrow mr-1"></i>Use my location
                        </button>
                    </p>
                </div>
                
                <!-- View Toggle & Sort -->
                <div class="flex items-center space-x-4 mt-4 sm:mt-0">
                    <!-- Sort Dropdown -->
                    <select id="sortBy" class="form-input text-sm focus-medical">
                        <option value="distance">Sort by Distance</option>
                        <option value="rating">Sort by Rating</option>
                        <option value="availability">Sort by Availability</option>
                        <option value="experience">Sort by Experience</option>
                    </select>
                    
                    <!-- View Toggle -->
                    <div class="flex bg-secondary-100 rounded-medical p-1">
                        <button id="listViewBtn" class="px-3 py-1 text-sm rounded-medical-sm transition-medical bg-white shadow-medical-sm text-primary">
                            <i class="fas fa-list mr-1"></i>List
                        </button>
                        <button id="mapViewBtn" class="px-3 py-1 text-sm rounded-medical-sm transition-medical text-secondary-600 hover:text-primary">
                            <i class="fas fa-map mr-1"></i>Map
                        </button>
                    </div>
                </div>
            </div>

            <!-- List View -->
            <div id="listView" class="space-y-4">
                <!-- Doctor Card 1 -->
                <div class="medical-card p-6 hover-lift transition-medical fade-in">
                    <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between">
                        <div class="flex items-start space-x-4">
                            <div class="w-16 h-16 rounded-full overflow-hidden flex-shrink-0">
                                <img src="https://images.unsplash.com/photo-1559839734-2b71ea197ec2?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Dr. Sarah Johnson" class="w-full h-full object-cover" onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                            </div>
                            <div class="flex-1">
                                <div class="flex items-start justify-between mb-2">
                                    <div>
                                        <h3 class="text-lg font-semibold text-text-primary">Dr. Sarah Johnson</h3>
                                        <p class="text-primary font-medium">Cardiologist</p>
                                        <p class="text-text-secondary text-sm">City General Hospital</p>
                                    </div>
                                    <button class="text-secondary-400 hover:text-primary transition-medical">
                                        <i class="fas fa-heart"></i>
                                    </button>
                                </div>
                                
                                <div class="flex items-center space-x-4 mb-3">
                                    <div class="flex items-center">
                                        <div class="flex text-warning mr-1">
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                        </div>
                                        <span class="text-sm text-text-secondary">4.9 (127 reviews)</span>
                                    </div>
                                    <div class="flex items-center text-text-secondary text-sm">
                                        <i class="fas fa-map-marker-alt mr-1"></i>
                                        <span>0.8 miles away</span>
                                    </div>
                                </div>
                                
                                <div class="flex flex-wrap gap-2 mb-3">
                                    <span class="px-2 py-1 bg-accent-50 text-accent text-xs rounded-medical-sm">Available Today</span>
                                    <span class="px-2 py-1 bg-secondary-100 text-secondary-600 text-xs rounded-medical-sm">Accepts Insurance</span>
                                    <span class="px-2 py-1 bg-secondary-100 text-secondary-600 text-xs rounded-medical-sm">15+ Years Experience</span>
                                </div>
                                
                                <p class="text-text-secondary text-sm mb-4">Specializes in preventive cardiology, heart disease management, and cardiac rehabilitation. Board-certified with extensive experience in interventional procedures.</p>
                            </div>
                        </div>
                        
                        <div class="flex flex-col lg:items-end space-y-3 mt-4 lg:mt-0 lg:ml-6">
                            <div class="text-right">
                                <p class="text-sm text-text-secondary">Next Available</p>
                                <p class="font-semibold text-text-primary">Today, 2:30 PM</p>
                            </div>
                            <div class="flex space-x-2">
                                <a href="doctor_profile_booking.html" class="btn-secondary text-sm px-4 py-2 hover-lift">View Profile</a>
                                <a href="doctor_profile_booking.html" class="btn-primary text-sm px-4 py-2 hover-lift">Book Now</a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Doctor Card 2 -->
                <div class="medical-card p-6 hover-lift transition-medical fade-in">
                    <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between">
                        <div class="flex items-start space-x-4">
                            <div class="w-16 h-16 rounded-full overflow-hidden flex-shrink-0">
                                <img src="https://images.pexels.com/photos/5327921/pexels-photo-5327921.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2" alt="Dr. Michael Chen" class="w-full h-full object-cover" onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                            </div>
                            <div class="flex-1">
                                <div class="flex items-start justify-between mb-2">
                                    <div>
                                        <h3 class="text-lg font-semibold text-text-primary">Dr. Michael Chen</h3>
                                        <p class="text-primary font-medium">Dermatologist</p>
                                        <p class="text-text-secondary text-sm">Skin Care Specialists</p>
                                    </div>
                                    <button class="text-secondary-400 hover:text-primary transition-medical">
                                        <i class="far fa-heart"></i>
                                    </button>
                                </div>
                                
                                <div class="flex items-center space-x-4 mb-3">
                                    <div class="flex items-center">
                                        <div class="flex text-warning mr-1">
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="far fa-star"></i>
                                        </div>
                                        <span class="text-sm text-text-secondary">4.7 (89 reviews)</span>
                                    </div>
                                    <div class="flex items-center text-text-secondary text-sm">
                                        <i class="fas fa-map-marker-alt mr-1"></i>
                                        <span>1.2 miles away</span>
                                    </div>
                                </div>
                                
                                <div class="flex flex-wrap gap-2 mb-3">
                                    <span class="px-2 py-1 bg-warning-50 text-warning text-xs rounded-medical-sm">Next Available Tomorrow</span>
                                    <span class="px-2 py-1 bg-secondary-100 text-secondary-600 text-xs rounded-medical-sm">Accepts Insurance</span>
                                    <span class="px-2 py-1 bg-secondary-100 text-secondary-600 text-xs rounded-medical-sm">10+ Years Experience</span>
                                </div>
                                
                                <p class="text-text-secondary text-sm mb-4">Expert in medical and cosmetic dermatology, skin cancer screening, and advanced laser treatments. Fluent in English and Mandarin.</p>
                            </div>
                        </div>
                        
                        <div class="flex flex-col lg:items-end space-y-3 mt-4 lg:mt-0 lg:ml-6">
                            <div class="text-right">
                                <p class="text-sm text-text-secondary">Next Available</p>
                                <p class="font-semibold text-text-primary">Tomorrow, 9:00 AM</p>
                            </div>
                            <div class="flex space-x-2">
                                <a href="doctor_profile_booking.html" class="btn-secondary text-sm px-4 py-2 hover-lift">View Profile</a>
                                <a href="doctor_profile_booking.html" class="btn-primary text-sm px-4 py-2 hover-lift">Book Now</a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Doctor Card 3 -->
                <div class="medical-card p-6 hover-lift transition-medical fade-in">
                    <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between">
                        <div class="flex items-start space-x-4">
                            <div class="w-16 h-16 rounded-full overflow-hidden flex-shrink-0">
                                <img src="https://images.pixabay.com/photo/2017/03/14/03/20/woman-2141808_1280.jpg" alt="Dr. Emily Rodriguez" class="w-full h-full object-cover" onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                            </div>
                            <div class="flex-1">
                                <div class="flex items-start justify-between mb-2">
                                    <div>
                                        <h3 class="text-lg font-semibold text-text-primary">Dr. Emily Rodriguez</h3>
                                        <p class="text-primary font-medium">Pediatrician</p>
                                        <p class="text-text-secondary text-sm">Children's Medical Center</p>
                                    </div>
                                    <button class="text-secondary-400 hover:text-primary transition-medical">
                                        <i class="far fa-heart"></i>
                                    </button>
                                </div>
                                
                                <div class="flex items-center space-x-4 mb-3">
                                    <div class="flex items-center">
                                        <div class="flex text-warning mr-1">
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                        </div>
                                        <span class="text-sm text-text-secondary">4.8 (156 reviews)</span>
                                    </div>
                                    <div class="flex items-center text-text-secondary text-sm">
                                        <i class="fas fa-map-marker-alt mr-1"></i>
                                        <span>2.1 miles away</span>
                                    </div>
                                </div>
                                
                                <div class="flex flex-wrap gap-2 mb-3">
                                    <span class="px-2 py-1 bg-accent-50 text-accent text-xs rounded-medical-sm">Available Today</span>
                                    <span class="px-2 py-1 bg-secondary-100 text-secondary-600 text-xs rounded-medical-sm">Accepts Insurance</span>
                                    <span class="px-2 py-1 bg-secondary-100 text-secondary-600 text-xs rounded-medical-sm">12+ Years Experience</span>
                                </div>
                                
                                <p class="text-text-secondary text-sm mb-4">Comprehensive pediatric care from newborns to adolescents. Specializes in developmental pediatrics and childhood immunizations. Bilingual in English and Spanish.</p>
                            </div>
                        </div>
                        
                        <div class="flex flex-col lg:items-end space-y-3 mt-4 lg:mt-0 lg:ml-6">
                            <div class="text-right">
                                <p class="text-sm text-text-secondary">Next Available</p>
                                <p class="font-semibold text-text-primary">Today, 4:15 PM</p>
                            </div>
                            <div class="flex space-x-2">
                                <a href="doctor_profile_booking.html" class="btn-secondary text-sm px-4 py-2 hover-lift">View Profile</a>
                                <a href="doctor_profile_booking.html" class="btn-primary text-sm px-4 py-2 hover-lift">Book Now</a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Loading Skeleton Cards -->
                <div id="loadingSkeletons" class="space-y-4 hidden">
                    <div class="medical-card p-6 animate-pulse">
                        <div class="flex items-start space-x-4">
                            <div class="w-16 h-16 bg-secondary-200 rounded-full"></div>
                            <div class="flex-1">
                                <div class="h-4 bg-secondary-200 rounded w-1/3 mb-2"></div>
                                <div class="h-3 bg-secondary-200 rounded w-1/4 mb-2"></div>
                                <div class="h-3 bg-secondary-200 rounded w-1/2 mb-3"></div>
                                <div class="flex space-x-2 mb-3">
                                    <div class="h-6 bg-secondary-200 rounded w-20"></div>
                                    <div class="h-6 bg-secondary-200 rounded w-24"></div>
                                </div>
                                <div class="h-3 bg-secondary-200 rounded w-full mb-1"></div>
                                <div class="h-3 bg-secondary-200 rounded w-3/4"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Load More Button -->
                <div class="text-center py-8">
                    <button id="loadMoreBtn" class="btn-secondary px-8 py-3 hover-lift transition-medical">
                        <i class="fas fa-plus mr-2"></i>Load More Doctors
                    </button>
                </div>
            </div>

            <!-- Map View -->
            <div id="mapView" class="hidden">
                <div class="medical-card p-0 overflow-hidden" style="height: 600px;">
                    <div id="doctorMap" class="w-full h-full bg-secondary-100 flex items-center justify-center">
                        <div class="text-center">
                            <i class="fas fa-map text-4xl text-secondary-400 mb-4"></i>
                            <p class="text-text-secondary">Interactive map will load here</p>
                            <p class="text-sm text-text-secondary mt-2">Showing doctor locations with custom markers</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Mobile Filter Panel -->
    <div id="mobileFilterPanel" class="fixed inset-0 bg-black bg-opacity-50 z-modal hidden lg:hidden">
        <div class="fixed bottom-0 left-0 right-0 bg-white rounded-t-medical-lg p-6 max-h-[80vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-lg font-semibold text-text-primary">Filters</h3>
                <button onclick="toggleMobileFilters()" class="text-secondary-400 hover:text-text-primary">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>

            <div class="space-y-6">
                <!-- Mobile Specialty Filter -->
                <div>
                    <label class="block text-sm font-medium text-text-primary mb-3">Specialty</label>
                    <select class="form-input w-full focus-medical">
                        <option value>All Specialties</option>
                        <option value="cardiology">Cardiology</option>
                        <option value="dermatology">Dermatology</option>
                        <option value="neurology">Neurology</option>
                        <option value="orthopedics">Orthopedics</option>
                        <option value="pediatrics">Pediatrics</option>
                    </select>
                </div>

                <!-- Mobile Distance -->
                <div>
                    <label class="block text-sm font-medium text-text-primary mb-3">Distance: <span id="mobileDistanceValue">10</span> miles</label>
                    <input type="range" id="mobileDistanceSlider" min="1" max="50" value="10" class="w-full h-2 bg-secondary-200 rounded-lg appearance-none cursor-pointer" />
                </div>

                <!-- Mobile Availability -->
                <div>
                    <label class="block text-sm font-medium text-text-primary mb-3">Available Date</label>
                    <input type="date" class="form-input w-full focus-medical" min="2025-01-18" />
                </div>

                <!-- Apply Filters Button -->
                <div class="pt-4 border-t border-secondary-200">
                    <button onclick="applyMobileFilters()" class="btn-primary w-full">
                        Apply Filters
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Floating Emergency Button -->
    <button class="floating-action" onclick="window.location.href='ai_symptom_analysis.html'">
        <i class="fas fa-plus text-xl"></i>
    </button>

    <script>
        // Global variables
        let currentView = 'list';
        let currentFilters = {};
        let currentSort = 'distance';
        let currentPage = 1;
        let isLoading = false;

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            initializeFilters();
            initializeSearch();
            initializeViewToggle();
            initializeInfiniteScroll();
            getCurrentLocation();
        });

        // Search functionality
        function initializeSearch() {
            const searchInput = document.getElementById('globalSearch');
            const suggestions = document.getElementById('searchSuggestions');
            let searchTimeout;

            searchInput.addEventListener('input', function(e) {
                clearTimeout(searchTimeout);
                const query = e.target.value.trim();
                
                if (query.length > 2) {
                    searchTimeout = setTimeout(() => {
                        showSearchSuggestions(query);
                    }, 300);
                } else {
                    suggestions.classList.add('hidden');
                }
            });

            searchInput.addEventListener('blur', function() {
                setTimeout(() => {
                    suggestions.classList.add('hidden');
                }, 200);
            });
        }

        function showSearchSuggestions(query) {
            const suggestions = document.getElementById('searchSuggestions');
            // Simulate API call for suggestions
            suggestions.classList.remove('hidden');
        }

        // Filter functionality
        function initializeFilters() {
            // Distance slider
            const distanceSlider = document.getElementById('distanceSlider');
            const distanceValue = document.getElementById('distanceValue');
            const mobileDistanceSlider = document.getElementById('mobileDistanceSlider');
            const mobileDistanceValue = document.getElementById('mobileDistanceValue');

            distanceSlider?.addEventListener('input', function(e) {
                distanceValue.textContent = e.target.value;
                updateFilters();
            });

            mobileDistanceSlider?.addEventListener('input', function(e) {
                mobileDistanceValue.textContent = e.target.value;
            });

            // Rating stars
            const ratingStars = document.querySelectorAll('.rating-star');
            ratingStars.forEach(star => {
                star.addEventListener('click', function() {
                    const rating = parseInt(this.dataset.rating);
                    updateRatingDisplay(rating);
                    updateFilters();
                });
            });

            // Other filters
            document.getElementById('specialtyFilter')?.addEventListener('change', updateFilters);
            document.getElementById('availabilityDate')?.addEventListener('change', updateFilters);
            document.getElementById('sortBy')?.addEventListener('change', function(e) {
                currentSort = e.target.value;
                sortResults();
            });
        }

        function updateRatingDisplay(rating) {
            const stars = document.querySelectorAll('.rating-star');
            const ratingText = document.getElementById('ratingText');
            
            stars.forEach((star, index) => {
                if (index < rating) {
                    star.classList.remove('text-secondary-300');
                    star.classList.add('text-warning');
                } else {
                    star.classList.remove('text-warning');
                    star.classList.add('text-secondary-300');
                }
            });
            
            ratingText.textContent = `${rating}+ stars`;
        }

        function updateFilters() {
            // Collect all filter values
            currentFilters = {
                specialty: document.getElementById('specialtyFilter')?.value || '',
                distance: document.getElementById('distanceSlider')?.value || 10,
                availability: document.getElementById('availabilityDate')?.value || '',
                rating: getCurrentRating()
            };
            
            // Apply filters to results
            filterResults();
        }

        function getCurrentRating() {
            const activeStars = document.querySelectorAll('.rating-star.text-warning');
            return activeStars.length;
        }

        function filterResults() {
            // Simulate filtering logic
            console.log('Applying filters:', currentFilters);
            // In a real app, this would make an API call
        }

        function clearAllFilters() {
            // Reset all filter inputs
            document.getElementById('specialtyFilter').value = '';
            document.getElementById('distanceSlider').value = 10;
            document.getElementById('distanceValue').textContent = '10';
            document.getElementById('availabilityDate').value = '';
            
            // Reset rating stars
            updateRatingDisplay(0);
            
            // Clear checkboxes
            document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
            
            updateFilters();
        }

        // View toggle functionality
        function initializeViewToggle() {
            const listViewBtn = document.getElementById('listViewBtn');
            const mapViewBtn = document.getElementById('mapViewBtn');
            const listView = document.getElementById('listView');
            const mapView = document.getElementById('mapView');

            listViewBtn.addEventListener('click', function() {
                currentView = 'list';
                
                // Update button states
                listViewBtn.classList.add('bg-white', 'shadow-medical-sm', 'text-primary');
                listViewBtn.classList.remove('text-secondary-600');
                mapViewBtn.classList.remove('bg-white', 'shadow-medical-sm', 'text-primary');
                mapViewBtn.classList.add('text-secondary-600');
                
                // Toggle views
                listView.classList.remove('hidden');
                mapView.classList.add('hidden');
            });

            mapViewBtn.addEventListener('click', function() {
                currentView = 'map';
                
                // Update button states
                mapViewBtn.classList.add('bg-white', 'shadow-medical-sm', 'text-primary');
                mapViewBtn.classList.remove('text-secondary-600');
                listViewBtn.classList.remove('bg-white', 'shadow-medical-sm', 'text-primary');
                listViewBtn.classList.add('text-secondary-600');
                
                // Toggle views
                mapView.classList.remove('hidden');
                listView.classList.add('hidden');
                
                // Initialize map if needed
                initializeMap();
            });
        }

        function initializeMap() {
            // In a real app, this would initialize Google Maps
            console.log('Initializing Google Maps...');
        }

        // Mobile filter panel
        function toggleMobileFilters() {
            const panel = document.getElementById('mobileFilterPanel');
            panel.classList.toggle('hidden');
        }

        function applyMobileFilters() {
            // Apply mobile filters
            toggleMobileFilters();
            updateFilters();
        }

        // Geolocation
        function getCurrentLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    function(position) {
                        const lat = position.coords.latitude;
                        const lng = position.coords.longitude;
                        console.log('User location:', lat, lng);
                        // Update results based on location
                        updateLocationBasedResults(lat, lng);
                    },
                    function(error) {
                        console.log('Geolocation error:', error);
                    }
                );
            }
        }

        function updateLocationBasedResults(lat, lng) {
            // Update results based on user location
            console.log('Updating results for location:', lat, lng);
        }

        // Infinite scroll and loading
        function initializeInfiniteScroll() {
            const loadMoreBtn = document.getElementById('loadMoreBtn');
            
            loadMoreBtn.addEventListener('click', function() {
                loadMoreResults();
            });

            // Optional: Auto-load on scroll
            window.addEventListener('scroll', function() {
                if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 1000) {
                    if (!isLoading && currentView === 'list') {
                        loadMoreResults();
                    }
                }
            });
        }

        function loadMoreResults() {
            if (isLoading) return;
            
            isLoading = true;
            const loadMoreBtn = document.getElementById('loadMoreBtn');
            const skeletons = document.getElementById('loadingSkeletons');
            
            // Show loading state
            loadMoreBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Loading...';
            loadMoreBtn.disabled = true;
            skeletons.classList.remove('hidden');
            
            // Simulate API call
            setTimeout(() => {
                // Hide loading state
                skeletons.classList.add('hidden');
                loadMoreBtn.innerHTML = '<i class="fas fa-plus mr-2"></i>Load More Doctors';
                loadMoreBtn.disabled = false;
                isLoading = false;
                currentPage++;
                
                // In a real app, append new results here
                console.log('Loaded page:', currentPage);
            }, 2000);
        }

        function sortResults() {
            console.log('Sorting by:', currentSort);
            // In a real app, this would re-sort the displayed results
        }

        // Heart/favorite functionality
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('fa-heart') || e.target.classList.contains('fa-heart')) {
                e.preventDefault();
                const icon = e.target;
                
                if (icon.classList.contains('far')) {
                    icon.classList.remove('far');
                    icon.classList.add('fas');
                    icon.style.color = '#DC2626';
                } else {
                    icon.classList.remove('fas');
                    icon.classList.add('far');
                    icon.style.color = '';
                }
            }
        });
    </script>
<script id="dhws-dataInjector" src="../public/dhws-data-injector.js"></script>
</body>
</html>